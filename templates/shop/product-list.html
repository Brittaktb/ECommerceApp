{% extends 'base.html' %} {% block content %}


<h2>List products by category</h2>

<!-- Searchfield by category to add -->
<br>
<h3>Categories:</h3>
<ul>
  {% for product in products %}
    <li>{{ product.category }}</li>
  {% empty %}
    <li>No products found.</li>
  {% endfor %}
</ul>



<form method="get" action=".">
  <input type="text" name="category" placeholder="Search category">
  <button type="submit">filter</button>
  <button type="button" onclick="window.location.href='{% url 'shop:product-list' %}'">clean filter</button>
</form>



<br>
<table>
  <tr>
    <th>Image</th>
    <th>Name</th>
    <th>Brand</th>
    <th>Description</th>
    <th>Price</th>
    <th>Action</th>
  </tr>
  {% for product in products %}
  <tr>
    <td class="product-image-column"><img class="product-image" src="{{ product.product_images.first.picture.url }}" alt="No images found..."/></td>
    <td>{{ product.name }}</td>
    <td>{{ product.brand }}</td>
    <td>{{ product.description }}</td>
    <td>
      {% if product.sale_price %}
        <div style="color:darkred;font-weight:bold">Sale</div>
        <strike>€{{ product.price }}</strike>&nbsp;€{{ product.sale_price }}
      {% else %}
        €{{ product.price }}
      {% endif %}
    </td>
    <td>
      <a href="{% url 'shop:product_detail' product.pk %}"><button>Product Details</button></a>
      <a href="{% url 'cart:add-to-cart' product.id %}"><button> > CART</button></a>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}


      {% comment %} <!--<form method="post" action="{%  %}">
        {% csrf_token %}-->
      <!--shop:add_to_cart product.id-->
      <!--</form>-->   {% endcomment %}